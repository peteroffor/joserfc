<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Migrating from PyJWT - joserfc</title>
    <link rel="index" title="索引" href="../../genindex/" /><link rel="search" title="搜索" href="../../search/" /><link rel="next" title="Dynamic keys for Azure" href="../../recipes/azure/" /><link rel="prev" title="Migrating from Authlib" href="../authlib/" />
    <link rel="canonical" href="https://jose.authlib.org/zh/dev/migrations/pyjwt/" />
  <script>
    const isDarkTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const sessionTheme = sessionStorage['_theme']
    if (sessionTheme) {
      document.documentElement.classList.add(sessionTheme)
    } else if (isDarkTheme) {
      document.documentElement.classList.add('dark')
    }
  </script><link rel="shortcut icon" href="../../_static/icon.svg"/><link rel="stylesheet" href="../../_static/pygments.css?v=2023.7.16" type="text/css" />
    <link rel="stylesheet" href="../../_static/shibuya.css?v=2023.7.16" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../../_static/print.css?v=2023.7.16" />
    <style>
:root {
  --sy-f-sys:-apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Droid Sans, Helvetica Neue;--sy-f-cjk:PingFang SC, Hiragino Sans GB, Droid Sans Fallback, Microsoft YaHei;--sy-f-heading:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-text:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-mono:Menlo, Monaco, Consolas, "Courier New", monospace;--sy-c-divider:rgba(var(--sy-rc-text), 0.1);--sy-c-divider-weak:rgba(var(--sy-rc-text), 0.05);--sy-c-border:rgba(var(--sy-rc-text), 0.14);--sy-s-banner-height:0rem;--sy-s-navbar-height:56px;--sy-s-offset-top:calc(var(--sy-s-navbar-height) + var(--sy-s-banner-height));--sy-c-link:rgb(var(--sy-rc-theme));--sy-c-link-weak:rgba(var(--sy-rc-theme), 0.86);
  --sy-rc-theme:62,127,203;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
@media (prefers-color-scheme: light) {
  :root {
    --sy-rc-theme:62,127,203;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --sy-rc-theme:102,173,255;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
  }
}
html.light {
  --sy-rc-theme:62,127,203;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
html.dark {
  --sy-rc-theme:102,173,255;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
}
</style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-heading: Inter, var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/>
<meta property="og:url" content="https://jose.authlib.org/zh/dev/migrations/pyjwt/"/>
<meta property="og:title" content="Migrating from PyJWT"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@lepture"/>
<meta name="twitter:site" content="@authlib"/>
      <link rel="alternate" hreflang="en" href="/en/dev/migrations/pyjwt/" />
      <link rel="alternate" hreflang="zh" href="/zh/dev/migrations/pyjwt/" />
  </head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand mr-4" href="../../">
      <img class="light-logo" src="../../_static/light-logo.svg" alt="joserfc" height="28" />
      <img class="dark-logo" src="../../_static/dark-logo.svg" alt="joserfc" height="28" />
      <strong>joserfc</strong>
    </a>
    <div class="sy-head-links" id="NavLinks">
      <nav class="sy-head-nav">

<ul>
      <li class="link"><button type="button">
            <span>Projects</span>
            <i class="i-icon chevron"></i>
          </button>
        <ul>
          <li><a href="https://authlib.org/">
                <span>Authlib</span>
                <small>OAuth, JOSE, OpenID, etc.</small>
              </a></li><li><a href="https://jose.authlib.org/">
                <span>JOSE RFC</span>
                <small>JWS, JWE, JWK, and JWT.</small>
              </a></li><li><a href="https://otp.authlib.org/">
                <span>OTP Auth</span>
                <small>One time password, HOTP/TOTP.</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/authlib"><span>Sponsor me</span><i class="i-icon external-link"></i></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../../search/" method="get">
  <input type="text" name="q" placeholder="搜索" />
  <kbd>/</kbd>
</form>
        
        
<div class="nav-languages">
  <button type="button">
    <span class="md:hidden">翻译</span>
    <i class="i-icon languages"></i>
  </button>
  <div class="nav-languages-choices">
    <ul><li><a href="/en/dev/migrations/pyjwt/">English</a></li><li><a href="/zh/dev/migrations/pyjwt/">简体中文</a></li></ul>
  </div>
</div>

        <div class="sy-head-social flex items-center">
            <a class="flex items-center" href="https://github.com/authlib/joserfc" aria-label="GitHub">
              <i class="i-icon github"></i>
            </a>
            <a class="flex items-center" href="https://discord.gg/HvBVAeNAaV" aria-label="Discord">
              <i class="i-icon discord"></i>
            </a>
        </div>
      </div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden">
      <button class="js-theme theme-switch flex items-center" data-aria-light="切换到暗色模式" data-aria-dark="切换到亮色模式">
        <i class="i-icon theme-icon"></i>
      </button>
      <button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="NavLinks" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc">
          <p class="caption" role="heading"><span class="caption-text">开始上手</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide/introduction/">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">必读文档</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../guide/">教程</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../guide/jwk/">JSON Web Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/jwt/">JSON Web Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/jws/">JSON Web Signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/jwe/">JSON Web Encryption</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/algorithms/">算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/registry/">Registry</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Migrations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../authlib/">Migrating from Authlib</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Migrating from PyJWT</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">小技巧</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../recipes/azure/">Dynamic keys for Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recipes/openssl/">Using OpenSSL command</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">开发者文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/jws/">JWS API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/jwe/">JWE API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/jwk/">JWK API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/jwt/">JWT API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stability/">API stability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/structure/">Understand code structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/authors/">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/sponsors/">Sponsors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a></li>
</ul>

        </div>
      </div>
      
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-icon close"></i>
    </button>
    <div class="sy-scrollbar px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4">
  <div class="localtoc">
    <h3>该页内容</h3>
    <ul>
<li><a class="reference internal" href="#jwt-encode">jwt.encode</a></li>
<li><a class="reference internal" href="#jwt-decode">jwt.decode</a></li>
<li><a class="reference internal" href="#non-plain-string-key">Non-plain string key</a></li>
<li><a class="reference internal" href="#claims-validation">Claims validation</a><ul>
<li><a class="reference internal" href="#verify-exp">Verify "exp"</a></li>
<li><a class="reference internal" href="#required-claims">Required claims</a></li>
</ul>
</li>
</ul>

  </div><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/authlib/joserfc"
  data-type="github" data-user="authlib" data-repo="joserfc">
  <span class="w-8 flex items-center justify-around shrink-0 text-2xl">
    <i class="i-icon github"></i>
  </span>
  <span class="flex-grow px-2">
    <span>authlib/joserfc</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <i class="i-icon star"></i>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <i class="i-icon git-fork"></i>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div class="edit-this-page">
  <a href="https://github.com/authlib/joserfc/blob/master/docs/migrations/pyjwt.rst">编辑此页面</a>
</div>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DKK3W&placement=joseauthliborg" id="_carbonads_js"></script><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-icon menu"></i>
      </button>
    </div>
    <ul class="flex-1">
      
      
      <li><a href="../../">joserfc</a><span>/</span></li>
      
      <li><a href="../">Migrations</a><span>/</span></li>
      
      <li><strong>Migrating from PyJWT</strong></li>
      
      
    </ul>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-icon outdent"></i>
      </button>
    </div>
  </div>
</div>
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="migrating-from-pyjwt">
<h1>Migrating from PyJWT<a class="headerlink" href="#migrating-from-pyjwt" title="此标题的永久链接">¶</a></h1>
<p>When migrating from PyJWT to <code class="docutils literal notranslate"><span class="pre">joserfc</span></code>, there are a few key differences to be aware of.
<code class="docutils literal notranslate"><span class="pre">joserfc</span></code> provides implementations for JWS (JSON Web Signature), JWE (JSON Web Encryption),
JWK (JSON Web Key), and JWT (JSON Web Token), whereas PyJWT focuses primarily on JWS and JWT.
Additionally, joserfc supports both JWT on JWS and JWT on JWE, offering more flexibility for
token handling.</p>
<section id="jwt-encode">
<h2>jwt.encode<a class="headerlink" href="#jwt-encode" title="此标题的永久链接">¶</a></h2>
<p>Both PyJWT and joserfc use the .encode method to generate a JWT, but the parameter structure
differs between the two libraries.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">PyJWT</span><a class="headerlink" href="#id1" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">jwt</span>
</span><span id="1-2"><span class="c1"># jwt.encode(payload, key, algorithm)</span>
</span><span id="1-3"><span class="n">encoded_jwt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">({</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span><span class="p">},</span> <span class="s2">&quot;secret&quot;</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;HS256&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">joserfc</span><a class="headerlink" href="#id2" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">from</span> <span class="nn">joserfc</span> <span class="kn">import</span> <span class="n">jwt</span>
</span><span id="1-2"><span class="c1"># jwt.encode(header, payload, key)</span>
</span><span id="1-3"><span class="n">encoded_jwt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">({</span><span class="s2">&quot;alg&quot;</span><span class="p">:</span> <span class="s2">&quot;HS256&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span><span class="p">},</span> <span class="s2">&quot;secret&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</section>
<section id="jwt-decode">
<h2>jwt.decode<a class="headerlink" href="#jwt-decode" title="此标题的永久链接">¶</a></h2>
<p>Similarly, both PyJWT and joserfc use the <code class="docutils literal notranslate"><span class="pre">.decode</span></code> method to verify and decode a JWT,
but the parameter structure differs.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">PyJWT</span><a class="headerlink" href="#id3" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="s2">&quot;secret&quot;</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;HS256&quot;</span><span class="p">])</span>
</span><span id="1-2"><span class="c1"># =&gt; {&quot;some&quot;: &quot;payload&quot;}</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">joserfc</span><a class="headerlink" href="#id4" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="s2">&quot;secret&quot;</span><span class="p">)</span>
</span><span id="1-2"><span class="c1"># =&gt; token.header : {&quot;alg&quot;: &quot;HS256&quot;}</span>
</span><span id="1-3"><span class="c1"># =&gt; token.claims : {&quot;some&quot;: &quot;payload&quot;}</span>
</span></pre></div>
</div>
</div>
</section>
<section id="non-plain-string-key">
<h2>Non-plain string key<a class="headerlink" href="#non-plain-string-key" title="此标题的永久链接">¶</a></h2>
<p>When using a non-plain string key (equivalent to an &quot;oct&quot; key) in joserfc, such as
RSA, EC, or OKP keys, the library provides built-in implementations to handle these
key types. This eliminates the need for manual key handling, which is required in PyJWT.</p>
<p>Let's take an example using an RSA key:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">PyJWT</span><a class="headerlink" href="#id5" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">jwt</span>
</span><span id="1-2"><span class="kn">from</span> <span class="nn">cryptography.hazmat.primitives</span> <span class="kn">import</span> <span class="n">serialization</span>
</span><span id="1-3"><span class="kn">from</span> <span class="nn">cryptography.hazmat.backends</span> <span class="kn">import</span> <span class="n">default_backend</span>
</span><span id="1-4"><span class="n">private_pem</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;-----BEGIN PRIVATE KEY-----</span><span class="se">\n</span><span class="s2">MIGEAgEAMBAGByqGSM49AgEGBS...&quot;</span>
</span><span id="1-5"><span class="n">private_key</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span>
</span><span id="1-6">    <span class="n">private_pem</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">()</span>
</span><span id="1-7"><span class="p">)</span>
</span><span id="1-8"><span class="n">encoded_jwt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">({</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span><span class="p">},</span> <span class="n">private_key</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;RS256&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">joserfc</span><a class="headerlink" href="#id6" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">from</span> <span class="nn">joserfc.jwk</span> <span class="kn">import</span> <span class="n">RSAKey</span>
</span><span id="1-2"><span class="kn">from</span> <span class="nn">joserfc</span> <span class="kn">import</span> <span class="n">jwt</span>
</span><span id="1-3">
</span><span id="1-4"><span class="n">private_pem</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;-----BEGIN PRIVATE KEY-----</span><span class="se">\n</span><span class="s2">MIGEAgEAMBAGByqGSM49AgEGBS...&quot;</span>
</span><span id="1-5">
</span><span id="1-6"><span class="c1"># Import the RSA key using joserfc&#39;s RSAKey</span>
</span><span id="1-7"><span class="n">key</span> <span class="o">=</span> <span class="n">RSAKey</span><span class="o">.</span><span class="n">import_key</span><span class="p">(</span><span class="n">private_pem</span><span class="p">)</span>
</span><span id="1-8">
</span><span id="1-9"><span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;alg&#39;</span><span class="p">:</span> <span class="s1">&#39;RS256&#39;</span><span class="p">}</span>
</span><span id="1-10"><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;some&#39;</span><span class="p">:</span> <span class="s1">&#39;payload&#39;</span><span class="p">}</span>
</span><span id="1-11"><span class="n">encoded</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
</section>
<section id="claims-validation">
<h2>Claims validation<a class="headerlink" href="#claims-validation" title="此标题的永久链接">¶</a></h2>
<p>Both PyJWT and <code class="docutils literal notranslate"><span class="pre">joserfc</span></code> provide mechanisms for claims validation, although
they differ in their approach.</p>
<p>In PyJWT, claims validation is performed within the <code class="docutils literal notranslate"><span class="pre">.decode</span></code> method itself. When decoding
a token, you can specify options such as <code class="docutils literal notranslate"><span class="pre">verify_exp</span></code> to validate the expiration time,
<code class="docutils literal notranslate"><span class="pre">verify_aud</span></code> to validate the audience, and other options for additional claim validations.
Claims validation is an integral part of the decoding process.</p>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">joserfc</span></code> follows a different approach by separating the decoding and
claims validation steps. The .decode method in joserfc is focused solely on decoding the
token and extracting the header and payload information. Claims validation is performed
separately using claims validators.</p>
<section id="verify-exp">
<h3>Verify &quot;exp&quot;<a class="headerlink" href="#verify-exp" title="此标题的永久链接">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">PyJWT</span><a class="headerlink" href="#id7" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">jwt</span>
</span><span id="1-2"><span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;verify_exp&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</span></pre></div>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">from</span> <span class="nn">joserfc</span> <span class="kn">import</span> <span class="n">jwt</span>
</span><span id="1-2"><span class="p">:</span><span class="n">caption</span><span class="p">:</span> <span class="n">joserfc</span>
</span><span id="1-3">
</span><span id="1-4"><span class="c1"># claims requests has built-in validators for exp, nbf, iat</span>
</span><span id="1-5"><span class="n">claims_requests</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">JWTClaimsRegistry</span><span class="p">()</span>
</span><span id="1-6"><span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="1-7"><span class="n">claims_requests</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">claims</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="required-claims">
<h3>Required claims<a class="headerlink" href="#required-claims" title="此标题的永久链接">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">PyJWT</span><a class="headerlink" href="#id8" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">jwt</span>
</span><span id="1-2"><span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;require&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">,</span> <span class="s2">&quot;iss&quot;</span><span class="p">,</span> <span class="s2">&quot;sub&quot;</span><span class="p">]})</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">joserfc</span><a class="headerlink" href="#id9" title="此代码块的永久链接">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">from</span> <span class="nn">joserfc</span> <span class="kn">import</span> <span class="n">jwt</span>
</span><span id="1-2">
</span><span id="1-3"><span class="n">claims_requests</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">JWTClaimsRegistry</span><span class="p">(</span>
</span><span id="1-4">    <span class="n">exp</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;essential&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span><span id="1-5">    <span class="n">iss</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;essential&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span><span id="1-6">    <span class="n">sub</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;essential&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span><span id="1-7"><span class="p">)</span>
</span><span id="1-8"><span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded_jwt</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="1-9"><span class="n">claims_requests</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">claims</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">JWTClaimsRegistry</span></code> accepts each claim as an <a class="reference external" href="ClaimsOption">Individual Claims Requests</a>
JSON object. You can learn more from <a class="reference internal" href="../../guide/jwt/#claims"><span class="std std-ref">Validate claims</span></a>.</p>
</section>
</section>
</section>

        </article>
        
        <div class="navigation flex print:hidden">
  <div class="navigation-prev">
    <a href="../authlib/">
      <i class="i-icon chevron"></i>
      <div class="page-info">
        <span>上一章</span>
        
        <div class="title">Migrating from Authlib</div>
        
      </div>
    </a>
  </div>
  <div class="navigation-next">
    <a href="../../recipes/azure/">
      <div class="page-info">
        <span>下一章</span>
        <div class="title">Dynamic keys for Azure</div>
      </div>
      <i class="i-icon chevron"></i>
    </a>
  </div>
</div>
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>Copyright &copy; 2023, Hsiaoming Yang</p>
        
        <p>
          Made with
          
          <a href="https://www.sphinx-doc.org/">Sphinx</a> and
          
          <a href="https://shibuya.lepture.com">Shibuya theme</a>.
        </p>
      </div>
      <div class="sy-foot-socials">
          <a href="https://github.com/authlib/joserfc" aria-label="GitHub"><i class="i-icon github"></i></a>
          <a href="https://twitter.com/authlib" aria-label="Twitter"><i class="i-icon twitter"></i></a>
          <a href="https://discord.gg/HvBVAeNAaV" aria-label="Discord"><i class="i-icon discord"></i></a>
      </div>
    </div>
  </div>
</footer></div>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
      <script src="../../_static/doctools.js"></script>
      <script src="../../_static/sphinx_highlight.js"></script>
      <script src="../../_static/clipboard.min.js"></script>
      <script src="../../_static/copybutton.js"></script>
      <script src="../../_static/design-tabs.js"></script>
      <script src="../../_static/shibuya.js?v=2023.7.16"></script>
    
</body>
</html>